"use strict";(self.webpackChunkhunt_the_wumpus=self.webpackChunkhunt_the_wumpus||[]).push([[156],{156:(fi,gt,l)=>{l.r(gt),l.d(gt,{GameModule:()=>hi});var C=l(895),V=l(969),i=l(256),j=l(690),xe=l(727),Ee=l(505),mt=l(421),_t=l(751),Ne=l(577),Se=l(144),_=l(576),yt=l(268);const Ge=["addListener","removeListener"],Pe=["addEventListener","removeEventListener"],Be=["on","off"];function q(e,n,t,r){if((0,_.m)(t)&&(r=t,t=void 0),r)return q(e,n,t).pipe((0,yt.Z)(r));const[o,s]=function Ue(e){return(0,_.m)(e.addEventListener)&&(0,_.m)(e.removeEventListener)}(e)?Pe.map(a=>u=>e[a](n,u,t)):function Te(e){return(0,_.m)(e.addListener)&&(0,_.m)(e.removeListener)}(e)?Ge.map(vt(e,n)):function Ie(e){return(0,_.m)(e.on)&&(0,_.m)(e.off)}(e)?Be.map(vt(e,n)):[];if(!o&&(0,Se.z)(e))return(0,Ne.z)(a=>q(a,n,t))((0,mt.Xf)(e));if(!o)throw new TypeError("Invalid event target");return new _t.y(a=>{const u=(...h)=>a.next(1<h.length?h:h[0]);return o(u),()=>s(u)})}function vt(e,n){return t=>r=>e[t](n,r)}var ke=l(671),He=l(482),Ct=l(403);function Ze(e,n){return e===n}const je=["hunter"],qe=["heightCells"];function Le(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"div",23)(1,"button",24),i.NdJ("click",function(){i.CHM(t);const o=i.oxw();return i.KtG(o.resetGame())}),i._uU(2,"Reiniciar juego"),i.qZA(),i._UZ(3,"br"),i.TgZ(4,"button",25),i._uU(5,"Ir al inicio"),i.qZA(),i._UZ(6,"br"),i.qZA()}}function Ye(e,n){1&e&&(i.TgZ(0,"div",29),i._uU(1,"salida "),i._UZ(2,"hr"),i.TgZ(3,"div",30,31),i._UZ(5,"img",5),i.qZA()())}function ze(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"div",39),i.NdJ("click",function(){i.CHM(t);const o=i.oxw(3);return i.KtG(o.collectGold())}),i._UZ(1,"img",40),i.qZA()}}function We(e,n){1&e&&(i.TgZ(0,"div",41),i._UZ(1,"img",42),i.qZA())}function $e(e,n){1&e&&(i.TgZ(0,"div",45),i._UZ(1,"img",6),i.qZA())}function Je(e,n){if(1&e&&(i.TgZ(0,"div",43),i.YNc(1,$e,2,0,"div",44),i.qZA()),2&e){const t=n.index,r=i.oxw(2).$implicit,o=i.oxw();i.xp6(1),i.Q6J("ngIf",r===o.stench[t]&&o.stench[t]!==o.wumpus&&o.stench[t]!==o.gold&&o.pits.indexOf(r)<0)}}function Qe(e,n){1&e&&(i.TgZ(0,"div",46),i._UZ(1,"img",9),i.qZA())}function Xe(e,n){if(1&e&&(i.TgZ(0,"div",46),i.YNc(1,Qe,2,0,"div",47),i.qZA()),2&e){const t=n.index,r=i.oxw(2).$implicit,o=i.oxw();i.xp6(1),i.Q6J("ngIf",r===o.brightness[t]&&o.brightness[t]!==o.wumpus&&o.brightness[t]!==o.gold&&o.pits.indexOf(r)<0)}}function Ke(e,n){1&e&&(i.TgZ(0,"div",48),i._UZ(1,"img",8),i.qZA())}function tn(e,n){1&e&&(i.TgZ(0,"div",49),i._UZ(1,"img",7),i.qZA())}const Vt=function(){return[0,1,2,3]};function en(e,n){if(1&e&&(i.TgZ(0,"div",32),i.YNc(1,ze,2,0,"div",33),i.YNc(2,We,2,0,"div",34),i.YNc(3,Je,2,1,"div",35),i.YNc(4,Xe,2,1,"div",36),i.YNc(5,Ke,2,0,"div",37),i.YNc(6,tn,2,0,"div",38),i.qZA()),2&e){const t=i.oxw().$implicit,r=i.oxw();i.xp6(1),i.Q6J("ngIf",t===r.gold&&!r.goldCollected),i.xp6(1),i.Q6J("ngIf",t===r.wumpus&&!r.deadWumpus),i.xp6(1),i.Q6J("ngForOf",i.DdM(6,Vt)),i.xp6(1),i.Q6J("ngForOf",i.DdM(7,Vt)),i.xp6(1),i.Q6J("ngIf",r.pits.indexOf(t)>=0),i.xp6(1),i.Q6J("ngIf",r.breeze.indexOf(t)>=0&&r.pits.indexOf(t)<0&&t!==r.wumpus&&t!==r.gold)}}function nn(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"div",26),i.NdJ("click",function(){const s=i.CHM(t).$implicit,a=i.oxw();return i.KtG(a.selectCell(s))}),i.YNc(1,Ye,6,0,"div",27),i.YNc(2,en,7,8,"div",28),i.qZA()}if(2&e){const t=n.$implicit,r=i.oxw();i.xp6(1),i.Q6J("ngIf",1===t),i.xp6(1),i.Q6J("ngIf",t===r.hunterPosition)}}let rn=(()=>{class e{constructor(t,r,o){this.gameService=t,this.renderer=r,this.router=o,this.cells=[],this.pits=[],this.pit=0,this.stench=[],this.breeze=[],this.brightness=[],this.hunterPosition=1,this.goldCollected=!1,this.resultMessage="",this.subscription=new xe.w0,this.finish=!1,this.deadWumpus=!1}ngOnInit(){this.startGame()}getSettings(){return this.gameService.getSettings().pipe((0,Ee.b)(t=>{for(let r=1;r<=t.cells;r++)this.cells?.push(r);for(;this.gold===this.wumpus||1===this.gold||1===this.wumpus;)this.gold=this.getRandomIntInclusive(),this.wumpus=this.getRandomIntInclusive(),this.stench=[this.wumpus-1,this.wumpus+1,this.wumpus-4,this.wumpus+4],this.brightness=[this.gold-1,this.gold+1,this.gold-4,this.gold+4];for(let r=1;r<=t.pits;r++){console.log(r,"pozo");do{this.pit=this.getRandomIntInclusive()}while(this.pit===this.wumpus||this.pit===this.gold||1===this.pit||this.pits.indexOf(this.pit)>=0);this.pit!==this.wumpus&&this.pit!==this.gold&&1!==this.pit&&(this.pits.push(this.pit),this.breeze.push(this.pit-1,this.pit+1))}})).subscribe(t=>{this.arrows=t.arrows})}getRandomIntInclusive(){let t=this.cells[0],r=this.cells[this.cells.length-1];return t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t+1)+t)}selectCell(t){t===this.gold&&this.hunterPosition===t?this.resultMessage="Oro recogido ve a la salida":this.arrows>=1?(this.arrows--,t===this.wumpus&&(this.resultMessage="Matastes al wumpus!",this.deadWumpus=!0,new Audio("assets/sounds/kill-wumpus.mp3").play()),new Audio("assets/sounds/arco.mp3").play()):this.finish||(this.resultMessage=" No tienes flechas")}startGame(){this.pits=[],this.breeze=[],this.subscription.add(this.getSettings());let t=0,r=0;const o=q(document,"keydown").pipe(function Re(e,n=ke.y){return e=e??Ze,(0,He.e)((t,r)=>{let o,s=!0;t.subscribe((0,Ct.x)(r,a=>{const u=n(a);(s||!e(o,u))&&(s=!1,o=u,r.next(a))}))})}());this.subscription.add(o.subscribe(s=>{this.finish||("ArrowDown"===s.key&&void 0!==this.hunter&&t<this.heightCells?.nativeElement.offsetHeight-120&&(this.hunterPosition=this.hunterPosition+4,t+=120,this.renderer.setStyle(this.hunter.nativeElement,"top",`${t}px`)),"ArrowUp"===s.key&&void 0!==this.hunter&&t>0&&(this.hunterPosition=this.hunterPosition-4,t-=120,this.renderer.setStyle(this.hunter.nativeElement,"top",`${t}px`)),"ArrowRight"===s.key&&void 0!==this.hunter&&r<240&&(this.hunterPosition=this.hunterPosition+1,r+=80,this.renderer.setStyle(this.hunter.nativeElement,"left",`${r}px`)),"ArrowLeft"===s.key&&void 0!==this.hunter&&r>0&&(this.hunterPosition=this.hunterPosition-1,r-=80,this.renderer.setStyle(this.hunter.nativeElement,"left",`${r}px`)),1===this.hunterPosition&&this.goldCollected&&(this.resultMessage="Ganastes!",new Audio("assets/sounds/win.mp3").play(),this.finish=!0),this.hunterPosition===this.wumpus&&!this.deadWumpus&&this.youLoser(),this.pits.indexOf(this.hunterPosition)>=0&&this.youLoser())}))}resetGame(){location.reload()}youLoser(){this.resultMessage="Perdistes!",this.finish=!0,new Audio("assets/sounds/pits.mp3").play()}collectGold(){this.finish||(this.goldCollected=!0)}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(j.h),i.Y36(i.Qsj),i.Y36(V.F0))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-board"]],viewQuery:function(t,r){if(1&t&&(i.Gf(je,5),i.Gf(qe,5)),2&t){let o;i.iGM(o=i.CRH())&&(r.hunter=o.first),i.iGM(o=i.CRH())&&(r.heightCells=o.first)}},decls:54,vars:3,consts:[[1,"result-message"],["class","actions",4,"ngIf"],["data-cy","board-game",1,"container"],["data-cy","info-game",1,"info"],[1,"references"],["src","https://static.vecteezy.com/system/resources/previews/001/186/969/non_2x/archer-png.png","width","30px","alt",""],["src","https://cdn-icons-png.flaticon.com/512/6930/6930335.png","width","30px","alt",""],["src","https://cdn-icons-png.flaticon.com/512/809/809188.png","width","30px","alt",""],["src","https://icones.pro/wp-content/uploads/2021/04/icone-cercle-rempli-noir.png","width","30px","alt",""],["src","https://images.vexels.com/media/users/3/206953/isolated/preview/bde53266b1bfbf4832b5cbd1e88b275a-icono-colorido-de-estrellas-de-brillo-limpio.png","width","30px","alt",""],["src","https://cdn-icons-png.flaticon.com/512/3309/3309977.png","width","30px","alt",""],["src","https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Wumpus.svg/1230px-Wumpus.svg.png","width","30px","alt",""],["data-cy","cells-game",1,"cells-container"],[1,"cells"],["heightCells",""],["class","cell",3,"click",4,"ngFor","ngForOf"],["data-cy","instructions-game",1,"instructions"],["src","https://cdn-icons-png.flaticon.com/512/31/31931.png","width","40px","alt",""],["src","https://cdn-icons-png.flaticon.com/512/30/30997.png","width","40px","alt",""],["src","https://cdn-icons-png.flaticon.com/512/31/31838.png","width","40px","alt",""],["src","https://cdn-icons-png.flaticon.com/512/31/31945.png","width","40px","alt",""],["src","https://static.vecteezy.com/system/resources/previews/001/186/991/non_2x/bow-and-arrow-png.png","width","40px","alt",""],["src","https://cdn-icons-png.flaticon.com/512/3309/3309977.png","width","50px","alt",""],[1,"actions"],[3,"click"],["routerLink","/start-game"],[1,"cell",3,"click"],["class","exit",4,"ngIf"],["class","cell-content",4,"ngIf"],[1,"exit"],[1,"hunter"],["hunter",""],[1,"cell-content"],["class","gold",3,"click",4,"ngIf"],["class","wumpus",4,"ngIf"],["class","stenchs",4,"ngFor","ngForOf"],["class","brightness",4,"ngFor","ngForOf"],["class","pits",4,"ngIf"],["class","breeze",4,"ngIf"],[1,"gold",3,"click"],["src","https://cdn-icons-png.flaticon.com/512/3309/3309977.png","width","50px","alt","Recoger oro"],[1,"wumpus"],["src","https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Wumpus.svg/1230px-Wumpus.svg.png","width","40px","alt",""],[1,"stenchs"],["class","stench",4,"ngIf"],[1,"stench"],[1,"brightness"],["class","brightness",4,"ngIf"],[1,"pits"],[1,"breeze"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"h1"),i._uU(2),i.qZA(),i._UZ(3,"br"),i.YNc(4,Le,7,0,"div",1),i.qZA(),i.TgZ(5,"div",2)(6,"div",3)(7,"h3"),i._uU(8,"Informaci\xf3n"),i.qZA(),i._UZ(9,"br"),i.TgZ(10,"div",4),i._UZ(11,"img",5),i._uU(12," Cazador: Tu. "),i._UZ(13,"br")(14,"img",6),i._uU(15," Hedor: El wumpus esta cerca. "),i._UZ(16,"br")(17,"img",7),i._uU(18," Brisa: Un pozo sin fondo esta cerca. "),i._UZ(19,"br")(20,"img",8),i._uU(21," Pozo: Si llegas a un pozo estas muerto. "),i._UZ(22,"br")(23,"img",9),i._uU(24," Brillo: El Oro esta cerca. "),i._UZ(25,"br")(26,"img",10),i._uU(27," Oro: Recogelo y ve a la salida para ganar. "),i._UZ(28,"br")(29,"img",11),i._uU(30," Wumpus: Lo matas o te mata."),i._UZ(31,"br"),i.qZA()(),i.TgZ(32,"div",12)(33,"div",13,14),i.YNc(35,nn,3,2,"div",15),i.qZA()(),i.TgZ(36,"div",16)(37,"h3"),i._uU(38,"Instrucciones"),i.qZA(),i._UZ(39,"br"),i.TgZ(40,"p"),i._uU(41,"Para moverte utiliza las teclas "),i._UZ(42,"img",17)(43,"img",18)(44,"img",19)(45,"img",20),i.qZA(),i.TgZ(46,"p"),i._uU(47,"Para disparar flechas "),i._UZ(48,"img",21),i._uU(49,", haz Click en los cuadros."),i.qZA(),i.TgZ(50,"p"),i._uU(51,"Para recoger el oro "),i._UZ(52,"img",22),i._uU(53,", haz click encima de el y ve a la salida."),i.qZA()()()),2&t&&(i.xp6(2),i.hij("",r.resultMessage," "),i.xp6(2),i.Q6J("ngIf",r.finish),i.xp6(31),i.Q6J("ngForOf",r.cells))},dependencies:[C.sg,C.O5,V.rH],styles:[".container[_ngcontent-%COMP%]{display:flex;margin-top:100px}.container[_ngcontent-%COMP%]   .cells-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .cells-container[_ngcontent-%COMP%]   .cells[_ngcontent-%COMP%]{margin:20px;width:320px;display:flex;flex-wrap:wrap}.container[_ngcontent-%COMP%]   .cells-container[_ngcontent-%COMP%]   .cells[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{width:80px;height:120px;position:relative;padding:2px;border:1px solid black}.container[_ngcontent-%COMP%]   .cells-container[_ngcontent-%COMP%]   .cells[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .gold[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]   .cells-container[_ngcontent-%COMP%]   .cells[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .hunter[_ngcontent-%COMP%]{position:absolute;width:100%;display:flex;justify-content:end;height:100%;align-items:center}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:40%;padding:8px}.container[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:40%}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:120px;background-color:#68e059;color:#000;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}.result-message[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;margin-top:10px}.result-message[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:column}.result-message[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px;margin-top:4px}@media only screen and (max-width: 1000px){.container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}"]}),e})(),on=(()=>{class e{constructor(t,r){this.gameService=t,this.router=r}ngOnInit(){if(localStorage.hasOwnProperty("config")){const t=localStorage.getItem("config");t&&this.gameService.setSettings(JSON.parse(t))}else this.router.navigate(["/start-game"])}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(j.h),i.Y36(V.F0))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-play-container"]],decls:1,vars:0,template:function(t,r){1&t&&i._UZ(0,"app-board")},dependencies:[rn]}),e})();var sn=l(76),an=l(742),ln=l(669),un=l(810),dn=l(4);let Mt=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Qsj),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e}),e})(),y=(()=>{class e extends Mt{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=i.n5z(e)))(r||e)}}(),e.\u0275dir=i.lG2({type:e,features:[i.qOj]}),e})();const p=new i.OlP("NgValueAccessor"),pn={provide:p,useExisting:(0,i.Gpc)(()=>E),multi:!0},gn=new i.OlP("CompositionEventMode");let E=(()=>{class e extends Mt{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fn(){const e=(0,C.q)()?(0,C.q)().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(gn,8))},e.\u0275dir=i.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&i.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[i._Bn([pn]),i.qOj]}),e})();function f(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function bt(e){return null!=e&&"number"==typeof e.length}const c=new i.OlP("NgValidators"),g=new i.OlP("NgAsyncValidators"),_n=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class L{static min(n){return Dt(n)}static max(n){return wt(n)}static required(n){return function Ot(e){return f(e.value)?{required:!0}:null}(n)}static requiredTrue(n){return function Ft(e){return!0===e.value?null:{required:!0}}(n)}static email(n){return function xt(e){return f(e.value)||_n.test(e.value)?null:{email:!0}}(n)}static minLength(n){return function Et(e){return n=>f(n.value)||!bt(n.value)?null:n.value.length<e?{minlength:{requiredLength:e,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function Nt(e){return n=>bt(n.value)&&n.value.length>e?{maxlength:{requiredLength:e,actualLength:n.value.length}}:null}(n)}static pattern(n){return function St(e){if(!e)return N;let n,t;return"string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),r=>{if(f(r.value))return null;const o=r.value;return n.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(n)}static nullValidator(n){return null}static compose(n){return Ut(n)}static composeAsync(n){return kt(n)}}function Dt(e){return n=>{if(f(n.value)||f(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}function wt(e){return n=>{if(f(n.value)||f(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}function N(e){return null}function Gt(e){return null!=e}function Pt(e){return(0,i.QGY)(e)?(0,sn.D)(e):e}function Bt(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function Tt(e,n){return n.map(t=>t(e))}function It(e){return e.map(n=>function yn(e){return!e.validate}(n)?n:t=>n.validate(t))}function Ut(e){if(!e)return null;const n=e.filter(Gt);return 0==n.length?null:function(t){return Bt(Tt(t,n))}}function Y(e){return null!=e?Ut(It(e)):null}function kt(e){if(!e)return null;const n=e.filter(Gt);return 0==n.length?null:function(t){return function cn(...e){const n=(0,ln.jO)(e),{args:t,keys:r}=(0,an.D)(e),o=new _t.y(s=>{const{length:a}=t;if(!a)return void s.complete();const u=new Array(a);let h=a,A=a;for(let Z=0;Z<a;Z++){let ft=!1;(0,mt.Xf)(t[Z]).subscribe((0,Ct.x)(s,pi=>{ft||(ft=!0,A--),u[Z]=pi},()=>h--,void 0,()=>{(!h||!ft)&&(A||s.next(r?(0,un.n)(r,u):u),s.complete())}))}});return n?o.pipe((0,yt.Z)(n)):o}(Tt(t,n).map(Pt)).pipe((0,dn.U)(Bt))}}function z(e){return null!=e?kt(It(e)):null}function Ht(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function Rt(e){return e._rawValidators}function Zt(e){return e._rawAsyncValidators}function W(e){return e?Array.isArray(e)?e:[e]:[]}function S(e,n){return Array.isArray(e)?e.includes(n):e===n}function jt(e,n){const t=W(n);return W(e).forEach(o=>{S(t,o)||t.push(o)}),t}function qt(e,n){return W(n).filter(t=>!S(e,t))}class Lt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Y(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=z(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class d extends Lt{get formDirective(){return null}get path(){return null}}class m extends Lt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Yt{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zt=(()=>{class e extends Yt{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(m,2))},e.\u0275dir=i.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&i.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[i.qOj]}),e})(),Wt=(()=>{class e extends Yt{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(d,10))},e.\u0275dir=i.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&i.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[i.qOj]}),e})();const b="VALID",P="INVALID",M="PENDING",D="DISABLED";function X(e){return(B(e)?e.validators:e)||null}function Jt(e){return Array.isArray(e)?Y(e):e||null}function K(e,n){return(B(n)?n.asyncValidators:e)||null}function Qt(e){return Array.isArray(e)?z(e):e||null}function B(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function Xt(e,n,t){const r=e.controls;if(!(n?Object.keys(r):r).length)throw new i.vHH(1e3,"");if(!r[t])throw new i.vHH(1001,"")}function Kt(e,n,t){e._forEachChild((r,o)=>{if(void 0===t[o])throw new i.vHH(1002,"")})}class T{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=t,this._composedValidatorFn=Jt(this._rawValidators),this._composedAsyncValidatorFn=Qt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===b}get invalid(){return this.status===P}get pending(){return this.status==M}get disabled(){return this.status===D}get enabled(){return this.status!==D}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=Jt(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=Qt(n)}addValidators(n){this.setValidators(jt(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(jt(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(qt(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(qt(n,this._rawAsyncValidators))}hasValidator(n){return S(this._rawValidators,n)}hasAsyncValidator(n){return S(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=M,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=D,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=b,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===b||this.status===M)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?D:b}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=M,this._hasOwnPendingAsyncValidator=!0;const t=Pt(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new i.vpe,this.statusChanges=new i.vpe}_calculateStatus(){return this._allControlsDisabled()?D:this.errors?P:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(M)?M:this._anyControlsHaveStatus(P)?P:b}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){B(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}}class w extends T{constructor(n,t,r){super(X(t),K(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){Kt(this,0,n),Object.keys(n).forEach(r=>{Xt(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(r=>{const o=this.controls[r];o&&o.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,o)=>{r.reset(n[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((o,s)=>{r=t(r,o,s)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class te extends w{}function O(e,n){tt(e,n),n.valueAccessor.writeValue(e.value),e.disabled&&n.valueAccessor.setDisabledState?.(!0),function wn(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&ee(e,n)})}(e,n),function Fn(e,n){const t=(r,o)=>{n.valueAccessor.writeValue(r),o&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function On(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&ee(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function Dn(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function U(e,n,t=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),H(e,n),e&&(n._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function k(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function tt(e,n){const t=Rt(e);null!==n.validator?e.setValidators(Ht(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=Zt(e);null!==n.asyncValidator?e.setAsyncValidators(Ht(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const o=()=>e.updateValueAndValidity();k(n._rawValidators,o),k(n._rawAsyncValidators,o)}function H(e,n){let t=!1;if(null!==e){if(null!==n.validator){const o=Rt(e);if(Array.isArray(o)&&o.length>0){const s=o.filter(a=>a!==n.validator);s.length!==o.length&&(t=!0,e.setValidators(s))}}if(null!==n.asyncValidator){const o=Zt(e);if(Array.isArray(o)&&o.length>0){const s=o.filter(a=>a!==n.asyncValidator);s.length!==o.length&&(t=!0,e.setAsyncValidators(s))}}}const r=()=>{};return k(n._rawValidators,r),k(n._rawAsyncValidators,r),t}function ee(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function oe(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function se(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const x=class extends T{constructor(n=null,t,r){super(X(t),K(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),B(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=se(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){oe(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){oe(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){se(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};let de=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const In={provide:p,useExisting:(0,i.Gpc)(()=>rt),multi:!0};let rt=(()=>{class e extends y{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=i.n5z(e)))(r||e)}}(),e.\u0275dir=i.lG2({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&i.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[i._Bn([In]),i.qOj]}),e})(),he=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();const ot=new i.OlP("NgModelWithFormControlWarning"),Zn={provide:d,useExisting:(0,i.Gpc)(()=>R)};let R=(()=>{class e extends d{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new i.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(H(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return O(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){U(t.control||null,t,!1),function Sn(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function re(e,n){e._syncPendingControls(),n.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(U(r||null,t),(e=>e instanceof x)(o)&&(O(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function ne(e,n){tt(e,n)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function xn(e,n){return H(e,n)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tt(this.form,this),this._oldForm&&H(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(c,10),i.Y36(g,10))},e.\u0275dir=i.lG2({type:e,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&i.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[i._Bn([Zn]),i.qOj,i.TTD]}),e})();const Ln={provide:m,useExisting:(0,i.Gpc)(()=>lt)};let lt=(()=>{class e extends m{constructor(t,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.update=new i.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function nt(e,n){if(!n)return null;let t,r,o;return Array.isArray(n),n.forEach(s=>{s.constructor===E?t=s:function Nn(e){return Object.getPrototypeOf(e.constructor)===y}(s)?r=s:o=s}),o||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function et(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function I(e,n){return[...n.path,e]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(t){return new(t||e)(i.Y36(d,13),i.Y36(c,10),i.Y36(g,10),i.Y36(p,10),i.Y36(ot,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[i._Bn([Ln]),i.qOj,i.TTD]}),e})();function Ce(e){return"number"==typeof e?e:parseFloat(e)}let v=(()=>{class e{constructor(){this._validator=N}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):N,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,features:[i.TTD]}),e})();const Xn={provide:c,useExisting:(0,i.Gpc)(()=>dt),multi:!0};let dt=(()=>{class e extends v{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>Ce(t),this.createValidator=t=>wt(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=i.n5z(e)))(r||e)}}(),e.\u0275dir=i.lG2({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&i.uIk("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[i._Bn([Xn]),i.qOj]}),e})();const Kn={provide:c,useExisting:(0,i.Gpc)(()=>ht),multi:!0};let ht=(()=>{class e extends v{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>Ce(t),this.createValidator=t=>Dt(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=i.n5z(e)))(r||e)}}(),e.\u0275dir=i.lG2({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&i.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[i._Bn([Kn]),i.qOj]}),e})(),si=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[he]}),e})(),we=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:ot,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[si]}),e})();class Oe extends T{constructor(n,t,r){super(X(t),K(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,t={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(n,t,r={}){this.controls.splice(n,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(n,t={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(n,t,r={}){let o=this._adjustIndex(n);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,t={}){Kt(this,0,n),n.forEach((r,o)=>{Xt(this,!1,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(n.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n=[],t={}){this._forEachChild((r,o)=>{r.reset(n[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((t,r)=>{n(t,r)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(t=>t.enabled&&n(t))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}function Fe(e){return!!e&&(void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn)}let ai=(()=>{class e{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new e;return t.useNonNullable=!0,t}group(t,r=null){const o=this._reduceControls(t);let s={};return Fe(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new w(o,s)}record(t,r=null){const o=this._reduceControls(t);return new te(o,r)}control(t,r,o){let s={};return this.useNonNullable?(Fe(r)?s=r:(s.validators=r,s.asyncValidators=o),new x(t,{...s,nonNullable:!0})):new x(t,r,o)}array(t,r,o){const s=t.map(a=>this._createControl(a));return new Oe(s,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof x||t instanceof T?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:we}),e})();function li(e,n){if(1&e&&(i.TgZ(0,"div",13),i._uU(1),i.qZA()),2&e){const t=i.oxw();i.xp6(1),i.Oqu(t.alertMessage)}}let ui=(()=>{class e{constructor(t,r,o){this.fb=t,this.gameService=r,this.router=o}ngOnInit(){this.buildForm()}buildForm(){this.settingsForm=this.fb.group({cells:[0,[L.required]],pits:[0,[L.required]],arrows:[0,[L.required]]})}start(){this.settingsForm.value.pits>=this.settingsForm.value.cells?(this.alertMessage="\xa1El n\xfamero de pozos debe ser menor que el de celdas!",setTimeout(()=>this.alertMessage="",5e3)):(this.gameService.setSettings(this.settingsForm.value),this.router.navigate(["/play"]))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(ai),i.Y36(j.h),i.Y36(V.F0))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-settings"]],decls:24,vars:2,consts:[[1,"settings-container"],[1,"card"],[1,"form",3,"formGroup","ngSubmit"],[1,"formField"],[1,"input-label"],["for","cells"],["data-cy","cells-input","type","number","step","4","name","cells","min","0","max","60","formControlName","cells"],["for","pits"],["data-cy","pits-input","type","number","step","4","name","pits","min","0","max","30","formControlName","pits"],["for","arrows"],["data-cy","arrows-input","type","number","step","4","name","arrows","min","0","max","10","formControlName","arrows"],["type","submit","data-cy","btn-start-game"],["class","alert",4,"ngIf"],[1,"alert"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h3"),i._uU(3,"Configurar juego"),i.qZA(),i.TgZ(4,"form",2),i.NdJ("ngSubmit",function(){return r.start()}),i.TgZ(5,"div",3)(6,"div",4)(7,"label",5),i._uU(8,"Celdas"),i.qZA()(),i._UZ(9,"input",6),i.qZA(),i.TgZ(10,"div",3)(11,"div",4)(12,"label",7),i._uU(13,"Pozos"),i.qZA()(),i._UZ(14,"input",8),i.qZA(),i.TgZ(15,"div",3)(16,"div",4)(17,"label",9),i._uU(18,"Flechas"),i.qZA()(),i._UZ(19,"input",10),i.qZA(),i._UZ(20,"hr"),i.TgZ(21,"button",11),i._uU(22,"Comenzar a jugar"),i.qZA()()()(),i.YNc(23,li,2,1,"div",12)),2&t&&(i.xp6(4),i.Q6J("formGroup",r.settingsForm),i.xp6(19),i.Q6J("ngIf",r.alertMessage))},dependencies:[C.O5,de,E,rt,zt,Wt,ht,dt,R,lt],styles:[".settings-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}.settings-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{text-align:center;width:360px;border:1px solid #f7373e;margin-top:100px;padding:20px}.settings-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.settings-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#000;border-radius:6px;background:#f7373e;border:0;margin:20px 0;padding:18px;cursor:pointer}.settings-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .formField[_ngcontent-%COMP%]{display:flex;align-items:center;margin:4px}.settings-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .formField[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{width:100px}.settings-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .formField[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;padding:4px;margin:0 10px}.alert[_ngcontent-%COMP%]{margin:10px auto 0;width:100%;background:rgb(255,180,180);width:-moz-fit-content;width:fit-content;text-align:center;padding:20px;border-radius:10px}"]}),e})();const ci=[{path:"start-game",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-start-game-container"]],decls:1,vars:0,template:function(t,r){1&t&&i._UZ(0,"app-settings")},dependencies:[ui]}),e})()},{path:"play",component:on},{path:"**",redirectTo:"start-game"}];let di=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[V.Bz.forChild(ci),V.Bz]}),e})(),hi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[C.ez,di,we]}),e})()}}]);